(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b2749650","chunk-2c0dfa26"],{"0a1b":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return s}));var a=n("bd2b");t="/app/";function r(e){return Object(a["a"])({url:t+"vFlow/def/get",method:"post",data:e})}function o(e){return Object(a["a"])({url:t+"vFlow/def/insert",method:"post",data:e})}function i(e){return Object(a["a"])({url:t+"vFlow/ins/startAbleByUser",method:"post",data:e})}function s(e){return Object(a["a"])({url:t+"vFlow/ins/start",method:"post",data:e})}},"1c2c":function(t,e,n){},"1ca9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{visible:t.visible,"append-to-body":!0,title:t.title},on:{"update:visible":function(e){t.visible=e}}},[null==t.templatePkId?n("div",t._l(t.rows,(function(e){return n("el-row",{key:e},t._l(4,(function(a){return n("el-col",{key:a,staticStyle:{"text-align":"center"},attrs:{span:6}},[4*(e-1)+a-1<t.buttons.length?n("el-button",{attrs:{size:"small",round:!0},on:{click:function(n){t.startPro(t.buttons[4*(e-1)+a-1]["deployId"])}}},[t._v(t._s(t.buttons[4*(e-1)+a-1]["name"]))]):t._e()],1)})),1)})),1):t._e(),null!=t.templatePkId?n("form-render",{attrs:{"template-pk-id":t.templatePkId}}):t._e()],1)],1)},r=[],o=n("0a1b"),i=n("891a"),s={name:"",components:{formRender:i["default"]},data:function(){return{rows:0,visible:!1,title:"发起流程",templatePkId:null,buttons:[]}},created:function(){this.init()},methods:{init:function(){var t=this;Object(o["d"])({}).then((function(e){t.buttons=e.data,t.rows=parseInt(t.buttons.length/4);var n=t.buttons.length%4;n>0&&t.rows++,t.visible=!0}))},startPro:function(t){var e=this;Object(o["c"])({deployId:t}).then((function(t){var n=t.data;void 0!==n?e.templatePkId=n:e.$message.success("流程启动成功，请返回我发起的查询发起任务")}))}}},u=s,c=(n("cba6"),n("2877")),l=Object(c["a"])(u,a,r,!1,null,"b845d0c0",null);e["default"]=l.exports},"6f4d":function(t,e,n){"use strict";n("af6e")},"891a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{padding:"10px"}},[n("v-form-render",{ref:"vFormRef",attrs:{"form-json":t.formJson,"form-data":t.formData,"data-dic-api":t.dataDicApi,"option-data":t.optionData}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.templatePkId,expression:"templatePkId"}],staticClass:"center"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("保存")])],1)],1)},r=[],o=(n("a9e3"),n("e9c4"),n("89a5")),i=n("5f87"),s=n("ad66"),u={name:"Render",props:{templatePkId:{type:Number,default:function(){return null}},pkId:{type:Number,default:function(){return null}},formData:{type:Object,default:function(){return{}}}},data:function(){return{dataDicApi:{URL:s["a"]+"user/sysCode/listEnum",headers:{Authorization:Object(i["a"])()},key:"fkId"},formJson:{},optionData:{},localTemplatePkId:this.templatePkId,localPkId:this.pkId}},mounted:function(){this.localTemplatePkId||(this.localTemplatePkId=this.$route.query.templatePkId,this.localPkId=this.$route.query.pkId),this.localTemplatePkId&&this.localPkId?this.getFormData():this.getFormJson(this.formData)},methods:{submitForm:function(){var t=this;this.$refs.vFormRef.getFormData().then((function(e){var n=Object.assign(e,{templatePkId:t.localTemplatePkId+"",pkId:t.localPkId});Object(o["e"])(n).then((function(e){t.$message.success("保存成功"),t.localPkId=e.data}))})).catch((function(e){t.$message.error(e)}))},getFormJson:function(t){var e=this,n={pkId:this.localTemplatePkId+""};Object(o["c"])(n).then((function(n){e.$refs.vFormRef.setFormJson(n.data.template),t&&e.$nextTick((function(){e.$refs.vFormRef.setFormData(t)}))}))},getFormData:function(){var t=this,e={pkId:this.localPkId,templatePkId:this.localTemplatePkId+""};Object(o["a"])(e).then((function(e){var n=Object.assign(JSON.parse(JSON.stringify(t.formData)),e.data);t.getFormJson(n)}))}}},c=u,l=(n("6f4d"),n("2877")),d=Object(l["a"])(c,a,r,!1,null,"79b1345e",null);e["default"]=d.exports},"89a5":function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var a=n("bd2b");t="/app/";function r(e){return Object(a["a"])({url:t+"fromDesigner/insert",method:"post",data:e})}function o(e){return Object(a["a"])({url:t+"fromDesigner/getById",method:"post",data:e})}function i(e){return Object(a["a"])({url:t+"fromDesigner/save",method:"post",data:e})}function s(e){return Object(a["a"])({url:t+"fromDesigner/get",method:"post",data:e})}function u(e){return Object(a["a"])({url:t+"fromDesigner/getByExistTable",method:"post",data:e})}},af6e:function(t,e,n){},cba6:function(t,e,n){"use strict";n("1c2c")}}]);