(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e485b4d"],{"30b50":function(e,t,n){e.exports=n.p+"static/img/card.818dc5fe.png"},"3fdb":function(e,t,n){e.exports=n.p+"static/img/btn_bujiao.05d5cdca.png"},b276:function(e,t,n){"use strict";n.r(t),n.d(t,"deal",(function(){return f})),n.d(t,"methods",(function(){return g}));n("b680"),n("ace4"),n("d3b7"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("d81d"),n("4e82"),n("fb6a"),n("159b"),n("b0c0"),n("caad"),n("2532"),n("a434");var i=n("5a89"),o=n("30b50"),r=n.n(o),a=n("b688"),s=n.n(a),h=n("3fdb"),c=n.n(h),d=n("f8e6"),u=n.n(d),m={0:{name:"大王",x:710,y:646,index:0},1:{name:"小王",x:592,y:646,index:1},2:{name:"♠2",x:710,y:485,index:2},3:{name:"♣2",x:1064,y:163,index:3},4:{name:"♦2",x:474,y:163,index:4},5:{name:"♥2",x:946,y:324,index:5},6:{name:"♠A",x:828,y:485,index:6},7:{name:"♣A",x:1182,y:163,index:7},8:{name:"♦A",x:238,y:2,index:8},9:{name:"♥A",x:1064,y:324,index:9},10:{name:"♠K",x:828,y:646,index:10},11:{name:"♣K",x:1182,y:324,index:11},12:{name:"♦K",x:1300,y:163,index:12},13:{name:"♥K",x:1064,y:485,index:13},14:{name:"♠Q",x:946,y:646,index:14},15:{name:"♣Q",x:1300,y:324,index:15},16:{name:"♦Q",x:1418,y:163,index:16},17:{name:"♥Q",x:1182,y:485,index:17},18:{name:"♠J",x:1064,y:646,index:18},19:{name:"♣J",x:1418,y:324,index:19},20:{name:"♦J",x:2,y:2,index:20},21:{name:"♥J",x:1300,y:485,index:21},22:{name:"♠10",x:1300,y:646,index:22},23:{name:"♣10",x:2,y:163,index:23},24:{name:"♦10",x:120,y:2,index:24},25:{name:"♥10",x:1418,y:485,index:25},26:{name:"♠9",x:1418,y:646,index:26},27:{name:"♣9",x:120,y:163,index:27},28:{name:"♦9",x:2,y:646,index:28},29:{name:"♥9",x:2,y:324,index:29},30:{name:"♠8",x:2,y:485,index:30},31:{name:"♣8",x:238,y:163,index:31},32:{name:"♦8",x:120,y:646,index:32},33:{name:"♥8",x:120,y:324,index:33},34:{name:"♠7",x:120,y:485,index:34},35:{name:"♣7",x:356,y:163,index:35},36:{name:"♦7",x:238,y:646,index:36},37:{name:"♥7",x:238,y:324,index:37},38:{name:"♠6",x:238,y:485,index:38},39:{name:"♣6",x:592,y:163,index:39},40:{name:"♦6",x:356,y:646,index:40},41:{name:"♥6",x:356,y:324,index:41},42:{name:"♠5",x:356,y:485,index:42},43:{name:"♣5",x:710,y:163,index:43},44:{name:"♦5",x:1182,y:646,index:44},45:{name:"♥5",x:474,y:324,index:45},46:{name:"♠4",x:474,y:485,index:46},47:{name:"♣4",x:828,y:163,index:47},48:{name:"♦4",x:946,y:485,index:48},49:{name:"♥4",x:592,y:324,index:49},50:{name:"♠3",x:592,y:485,index:50},51:{name:"♣3",x:946,y:163,index:51},52:{name:"♦3",x:710,y:324,index:52},53:{name:"♥3",x:828,y:324,index:53},54:{name:"背面",x:474,y:646,index:54}},x=function(e,t){var n=(e/1550).toFixed(5),i=(t/809).toFixed(5),o=((e+116)/1550).toFixed(5),r=((t+159)/809).toFixed(5),a=new Float32Array([n,r,o,r,n,i,o,i]);return a},l=function(e,t){var n=new Float32Array([0,1,1,1,0,0,1,0]);return n},f=function(){var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53];function t(e,t){return e-t}Array.prototype.deranged||(Array.prototype.deranged=function(){for(var e,t,n=this.length;n;e=parseInt(Math.random()*n),t=this[--n],this[n]=this[e],this[e]=t);return this});var n=e.deranged(),i=n.slice(0,17).sort(t).map((function(e){return m[e]})),o=n.slice(17,34).sort(t).map((function(e){return m[e]})),r=n.slice(34,51).sort(t).map((function(e){return m[e]})),a=n.slice(51,54).sort(t).map((function(e){return m[e]})),s=[54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54,54],h=s.map((function(e){return m[e]}));return[i,o,r,a,h]},g={data:function(){return{bgWidth:1136,bgHeight:768,cdWidth:116,cdHeight:159,moveHeight:20,scene:new i["i"],camera:null,renderer:null,gui:null,leftGroup:new i["c"],rightGroup:new i["c"],mainGroup:new i["c"],outGroup:new i["c"],topGroup:new i["c"],checkMesh:[],buttonGroup:new i["c"]}},methods:{initCardMaterial:function(){return new i["e"]({map:(new i["j"]).load(r.a),transparent:!0})},initButtonMaterial:function(e){return new i["e"]({map:(new i["j"]).load(e),transparent:!0})},initBackGround:function(){var e=new i["e"]({map:(new i["j"]).load(s.a),transparent:!0}),t=new i["d"](new i["g"](this.bgWidth,this.bgHeight),e);t.position.set(0,0,0),this.scene.add(t)},leftPalyer:function(e){var t=this;e.forEach((function(e){var n=new i["g"](t.cdWidth,t.cdHeight);n.attributes.uv=new i["b"](x(e.x,e.y),2),t.leftGroup.add(new i["d"](n,t.initCardMaterial()))}));var n=this.leftGroup.children;n.forEach((function(e){return e.rotateZ(1.55)}));for(var o=20,r=(this.bgWidth-this.cdHeight)/2,a=(this.cdHeight-(n.length*o+this.cdWidth))/2,s=0;s<n.length;s++)n[s].position.set(0-r,a+s*o,s+1);this.scene.add(this.leftGroup)},rightPalyer:function(e){var t=this;e.forEach((function(e){var n=new i["g"](t.cdWidth,t.cdHeight);n.attributes.uv=new i["b"](x(e.x,e.y),2),t.rightGroup.add(new i["d"](n,t.initCardMaterial()))}));var n=this.rightGroup.children;n.forEach((function(e){return e.rotateZ(1.55)}));for(var o=20,r=(this.bgWidth-this.cdHeight)/2,a=(this.cdHeight-(n.length*o+this.cdWidth))/2,s=0;s<n.length;s++)n[s].position.set(r,a+s*o,s+1);this.scene.add(this.rightGroup)},sidePalyer:function(e){this.leftPalyer(e),this.rightPalyer(e)},bottomPalyer:function(e){var t=this;e.forEach((function(e){var n=new i["g"](t.cdWidth,t.cdHeight);n.attributes.uv=new i["b"](x(e.x,e.y),2);var o=new i["d"](n,t.initCardMaterial());o.name=e.index,t.mainGroup.add(o)})),this.bottomPosition(),this.scene.add(this.mainGroup)},topPalyer:function(e){var t=this;e.forEach((function(e){var n=new i["g"](t.cdWidth,t.cdHeight);n.attributes.uv=new i["b"](x(e.x,e.y),2),t.topGroup.add(new i["d"](n,t.initCardMaterial()))}));for(var n=this.topGroup.children,o=40,r=0-(n.length-1)*o/2,a=(this.bgHeight-this.cdHeight)/2,s=0;s<n.length;s++)n[s].position.set(r+s*o,a,s+1);this.scene.add(this.topGroup)},button:function(){var e=this,t=[{pic:u.a,index:"chupai"},{pic:c.a,index:"buchu"}],n=211,o=84;t.forEach((function(t){var r=new i["g"](n,o);r.attributes.uv=new i["b"](l(),2);var a=new i["d"](r,e.initButtonMaterial(t.pic));a.name=t.index,e.buttonGroup.add(a)}));for(var r=this.buttonGroup.children,a=n,s=0-(r.length-1)*a/2,h=0-(this.bgHeight-o)/2+this.cdHeight+2*this.moveHeight,d=0;d<r.length;d++)r[d].position.set(s+d*a,h,1);this.scene.add(this.buttonGroup)},bottomPosition:function(){for(var e=this.mainGroup.children,t=40,n=0-(e.length-1)*t/2,i=0-(this.bgHeight-this.cdHeight)/2,o=0;o<e.length;o++)e[o].position.set(n+o*t,i,o+1)},outPosition:function(){for(var e=this.outGroup.children,t=40,n=0-(e.length-1)*t/2,i=0,o=0;o<e.length;o++)e[o].position.set(n+o*t,i,o+1)},initCamera:function(){var e=this.bgWidth/this.bgHeight,t=this.bgHeight/2;this.camera=new i["f"](-t*e,t*e,t,-t,1,2e3),this.camera.position.set(0,0,100),this.camera.lookAt(0,0,0)},reloadCamera:function(){var e,t;this.$route.fullPath.includes("test")?this.renderer.setSize(window.innerWidth,window.innerHeight):this.renderer.setSize(window.innerWidth,window.innerHeight-84),window.innerWidth<500?(e=this.bgHeight/this.bgWidth,t=this.bgWidth/2,this.camera.up.set(-1,0,0)):(e=this.bgWidth/this.bgHeight,t=this.bgHeight/2,this.camera.up.set(0,1,0)),this.camera.left=-t*e,this.camera.right=t*e,this.camera.top=t,this.camera.bottom=-t,this.camera.lookAt(0,0,0),this.camera.updateProjectionMatrix()},initRenderer:function(){this.scene.add(this.outGroup),this.scene.add(new i["a"](150)),this.renderer=new i["l"]({antialias:!0}),this.reloadCamera(),this.renderer.render(this.scene,this.camera);var e=this.scene,t=this.camera,n=this.renderer;function o(){n.render(e,t),requestAnimationFrame(o)}o(),document.getElementById("three").appendChild(this.renderer.domElement);var r=this;window.onresize=function(){r.reloadCamera()},this.renderer.domElement.addEventListener("click",(function(e){var n=e.offsetX/window.innerWidth*2-1,o=-e.offsetY/window.innerHeight*2+1,a=new i["h"];a.setFromCamera(new i["k"](n,o),t);var s=a.intersectObjects(r.mainGroup.children);if(s.length>0)r.checkCard(s[0].object);else{var h=a.intersectObjects(r.buttonGroup.children);h.length>0&&r.outCard(h[0].object.name)}}))},checkCard:function(e){var t=this.checkMesh.indexOf(e);-1!==t?(this.checkMesh.splice(t,1),e.position.y-=this.moveHeight):(this.checkMesh.push(e),e.position.y+=this.moveHeight)},outCard:function(e){var t=this;if("buchu"===e)this.checkMesh.forEach((function(e){e.position.y-=t.moveHeight})),this.checkMesh=[];else{var n=this.checkMesh.map((function(e){return e.name}));if(this.post(n)){for(var i=this.outGroup.children,o=i.length-1,r=o;r>=0;r--)this.outGroup.remove(i[r]);this.checkMesh.forEach((function(e){t.outGroup.add(e),t.mainGroup.remove(e)})),this.outPosition(),this.bottomPosition(),this.checkMesh=[]}}}}}},b688:function(e,t,n){e.exports=n.p+"static/img/table_bg_1.7f3bf7bc.jpg"},ed17:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"three"}})},o=[],r=(n("e9c4"),n("b276")),a=n("c24f"),s={name:"App",components:{},extends:r["methods"],data:function(){return{user:{},websock:null,websock2:null,websock3:null}},created:function(){this.initUser()},mounted:function(){this.init()},methods:{initUser:function(){var e=this;Object(a["b"])().then((function(t){var n=t.data.pkId;e.user={id:n},e.initWebSocket()}))},initWebSocket:function(){this.websock=new WebSocket("ws://120.24.168.1:8005/im/socket/message?token="+this.user.id),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("WebSocket连接成功");var e={method:"ready"};this.websock.send(JSON.stringify(e))},websocketonerror:function(e){console.log("WebSocket连接发生错误",e)},websocketonmessage:function(e){var t=JSON.parse(e.data);console.log(t);var n=t.state,i=t.msg,o=t.key;if(1===n)console.log(i);else if(2===n){var r={method:"agree",key:o};this.websock.send(JSON.stringify(r))}console.log(n,i)},websocketclose:function(e){console.log("connection closed ("+e.code+")")},init:function(){this.initBackGround();var e=Object(r["deal"])();this.sidePalyer(e[4]),this.bottomPalyer(e[0]),this.button(),this.topPalyer(e[3]),this.initCamera(),this.initRenderer()},post:function(e){return!0}}},h=s,c=n("2877"),d=Object(c["a"])(h,i,o,!1,null,null,null);t["default"]=d.exports},f8e6:function(e,t,n){e.exports=n.p+"static/img/btn_chupai.ce997572.png"}}]);